<div align="center">

# PocketMocker

<p>
  <a href="https://www.npmjs.com/package/pocket-mocker" target="_blank">
    <img src="https://img.shields.io/npm/v/pocket-mocker?style=for-the-badge&logo=npm" alt="NPM ç‰ˆæœ¬" />
  </a>
  <a href="https://github.com/tianchangNorth/pocket-mocker/blob/main/LICENSE" target="_blank">
    <img src="https://img.shields.io/github/license/tianchangNorth/pocket-mocker?style=for-the-badge&color=blue" alt="å¼€æºåè®®" />
  </a>
  <a href="https://github.com/tianchangNorth/pocket-mocker/actions/workflows/ci.yml" target="_blank">
    <img src="https://img.shields.io/github/actions/workflow/status/tianchangNorth/pocket-mocker/ci.yml?branch=main&style=for-the-badge&logo=github" alt="CI çŠ¶æ€" />
  </a>
</p>

<p>
  <a href="https://tianchangnorth.github.io/pocket-mocker/" target="_blank">
    <strong>ğŸš€ åœ¨çº¿æ¼”ç¤º</strong>
  </a>
  Â·
  <a href="#å®‰è£…">å®‰è£…</a>
  Â·
  <a href="#å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹</a>
  Â·
  <a href="#è´¡çŒ®ä¸è”ç³»">è´¡çŒ®ä¸è”ç³»</a>
  Â·
  <a href="https://github.com/tianchangNorth/pocket-mocker/discussions">è®¨è®º</a>
  Â·
  <a href="https://discord.gg/cjGqnppNZW" target="_blank">
    <strong>ğŸ’¬ Discord</strong>
  </a>
</p>

<p>
  <a href="../README.md">English</a> Â· <strong>ä¸­æ–‡</strong>
</p>

</div>

## PocketMocker æ˜¯ä»€ä¹ˆï¼Ÿ

**PocketMocker æ˜¯ä¸€æ¬¾å‰ç«¯å¼€å‘ä¸“ç”¨çš„é¡µé¢å†… HTTP æ§åˆ¶å™¨ã€‚**

ç®€å•æ¥è¯´ï¼Œè®©ä½ ç›´æ¥å†³å®šæ¥å£è¿”å›ä»€ä¹ˆâ€”â€”æ— éœ€æ”¹åç«¯ï¼Œæ— éœ€èµ· Mock Serverã€‚

å®ƒæä¾›äº†ä¸€ä¸ª**å¯è§†åŒ–æ§åˆ¶é¢æ¿**ç›´æ¥åµŒå…¥æµè§ˆå™¨ï¼Œè®©ä½ å®æ—¶æ‹¦æˆªå’Œæ“ä½œ HTTP å“åº”ï¼Œé€šè¿‡**å³æ—¶çœ‹åˆ°å˜åŒ–**æ¥å¿«é€Ÿæ„å»ºå¥å£®çš„ UIã€‚

---

## ä¸ºä»€ä¹ˆé€‰æ‹© PocketMockerï¼Ÿ

### è½»æ¾ Mock
å‘Šåˆ«æ‰‹å†™ Mock ä»£ç ã€‚è‡ªåŠ¨æ‹¦æˆªè¯·æ±‚ï¼Œæ™ºèƒ½ç”Ÿæˆæ•°æ®ï¼Œä¸€é”®å¯¼å…¥ API æ–‡æ¡£ã€‚

### å®Œå…¨æŒæ§
*   **æ—¶åºæ§åˆ¶**ï¼šæ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿã€ç«æ€æ¡ä»¶
*   **çŠ¶æ€æ§åˆ¶**ï¼šå¼ºåˆ¶ 500 é”™è¯¯ã€401 æœªæˆæƒã€ç©ºå“åº”
*   **è½½è·æ³¨å…¥**ï¼šæµ‹è¯•è¾¹ç•Œæ•°æ®å’Œå¼‚å¸¸æƒ…å†µ

### å³æ—¶è°ƒè¯•
åœ¨æµè§ˆå™¨ä¸­å®æ—¶ç¼–è¾‘å“åº”ï¼Œç«‹å³çœ‹åˆ° UI æ›´æ–°ã€‚æ— éœ€åˆ‡æ¢å·¥å…·ï¼Œä¿æŒå¼€å‘å¿ƒæµã€‚

---

## å®é™…åº”ç”¨åœºæ™¯

### å³æ—¶çŠ¶æ€åˆ‡æ¢
ä¸€é”®åˆ‡æ¢**æˆåŠŸ**ã€**é”™è¯¯ï¼ˆ500/404ï¼‰**æˆ–**ç©ºæ•°æ®**çŠ¶æ€ã€‚éªŒè¯æ‚¨çš„ UI å¦‚ä½•å¤„ç†åŠ è½½åŠ¨ç”»æˆ–é”™è¯¯æç¤ºï¼Œæ— éœ€ä¿®æ”¹ä»»ä½•ä»£ç ã€‚

### å®æ—¶æ•°æ®è°ƒæ•´
éœ€è¦æµ‹è¯•è¶…é•¿ç”¨æˆ·åï¼Ÿç¼ºå¤±çš„å¤´åƒï¼Ÿæˆ–ç‰¹å®šçš„ä»·æ ¼æ ¼å¼ï¼Ÿç›´æ¥åœ¨é¢æ¿ä¸­ç¼–è¾‘å“åº” JSONï¼Œç«‹å³çœ‹åˆ° UI æ›´æ–°ã€‚

### è¾¹ç•Œæƒ…å†µéªŒè¯
æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿã€è¶…æ—¶é”™è¯¯æˆ–æœªæˆæƒï¼ˆ401ï¼‰å“åº”ï¼Œç¡®ä¿æ‚¨çš„åº”ç”¨ä¼˜é›…åœ°å¤„ç†å¼‚å¸¸æƒ…å†µã€‚

https://github.com/user-attachments/assets/e7501191-7ef1-4bd4-bd21-6500585fe4ad

## ä½•æ—¶ä½¿ç”¨ PocketMockerï¼Ÿ

**ä½¿ç”¨ Postman è¿›è¡Œï¼š**
*   API è®¾è®¡ä¸æ–‡æ¡£
*   åç«¯å¥‘çº¦æµ‹è¯•
*   å›¢é˜Ÿçº§ API ç®¡ç†

**ä½¿ç”¨ PocketMocker è¿›è¡Œï¼š**
*   **å¿«é€Ÿ UI å¼€å‘**ï¼š"æˆ‘ç°åœ¨å°±éœ€è¦è®©è¿™ä¸ªåˆ—è¡¨ä¸ºç©ºã€‚"
*   **å¯è§†åŒ–è°ƒè¯•**ï¼š"ä¸ºä»€ä¹ˆæˆ‘çš„é”™è¯¯è¾¹ç•Œæ²¡æœ‰æ˜¾ç¤ºï¼Ÿ"
*   **é›¶ä¸Šä¸‹æ–‡åˆ‡æ¢**ï¼šç•™åœ¨æµè§ˆå™¨ä¸­ï¼Œä¿æŒå¿ƒæµçŠ¶æ€ã€‚
*   **Git å‹å¥½**ï¼šé€šè¿‡é…ç½®æ–‡ä»¶å…±äº« Mock è§„åˆ™ï¼Œå°±åƒæ‚¨çš„ä»£ç ä¸€æ ·ã€‚

---

## å®‰è£…

```bash
npm install pocket-mocker --save-dev
# æˆ–è€…
yarn add pocket-mocker -D
# æˆ–è€…
pnpm add pocket-mocker -D
```

---

## å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šé›¶é…ç½®ä½¿ç”¨ï¼ˆæœ¬åœ°æ¨¡å¼ï¼‰

é€‚åˆä¸ªäººå¼€å‘æˆ–å¿«é€Ÿå°è¯•ã€‚ç›´æ¥åœ¨é¡¹ç›®çš„å…¥å£æ–‡ä»¶ä¸­å¼•å…¥å¹¶å¯åŠ¨ï¼š

```javascript
import { pocketMock } from 'pocket-mocker';

// ä»…åœ¨å¼€å‘ç¯å¢ƒä¸­å¯åŠ¨
if (process.env.NODE_ENV === 'development') {
  pocketMock();
}
```

å¯åŠ¨é¡¹ç›®åï¼Œé¡µé¢å³ä¸‹è§’ä¼šå‡ºç° **PocketMocker** æµ®çª—ã€‚

### æ–¹å¼äºŒï¼šå›¢é˜Ÿåä½œæ¨¡å¼ï¼ˆVite æ’ä»¶ï¼‰ğŸ”¥ æ¨è

é€‚åˆç”Ÿäº§çº§é¡¹ç›®ã€‚é€šè¿‡ Vite æ’ä»¶æ‰“é€šæ–‡ä»¶ç³»ç»Ÿï¼Œå°† Mock è§„åˆ™ä¿å­˜ä¸ºé…ç½®æ–‡ä»¶ï¼Œæ–¹ä¾¿å›¢é˜Ÿå…±äº«ã€‚

**1. åœ¨å…¥å£æ–‡ä»¶å¼•å…¥**

```javascript
import { pocketMock } from 'pocket-mocker';

if (process.env.NODE_ENV === 'development') {
  pocketMock();
}
```

**2. é…ç½® `vite.config.ts`**

```typescript
import { defineConfig } from 'vite';
import pocketMockPlugin from 'pocket-mocker/vite-plugin';

export default defineConfig({
  plugins: [
    pocketMockPlugin()
  ]
});
```

**3. å¯åŠ¨å¼€å‘**

è¿è¡Œ `npm run dev`ã€‚PocketMock ä¼šè‡ªåŠ¨æ£€æµ‹æ’ä»¶ç¯å¢ƒå¹¶åˆ‡æ¢åˆ° **æœåŠ¡å™¨æ¨¡å¼**ã€‚

---

## è¿›é˜¶åŠŸèƒ½

### URL æ¨¡å¼åŒ¹é…

PocketMock æ”¯æŒå¼ºå¤§çš„ URL æ¨¡å¼æ¥æ¨¡æ‹Ÿå¤æ‚çš„ APIï¼š

- **è·¯å¾„å‚æ•°**: `/api/users/:id` â†’ åŒ¹é… `/api/users/123`, `/api/users/john`
- **é€šé…ç¬¦**: `/api/*` â†’ åŒ¹é… `/api/users`, `/api/users/123/posts`
- **æ··åˆæ¨¡å¼**: `/api/:version/users/*/profile` â†’ åŒ¹é… `/api/v1/users/123/profile`

åœ¨æ¨¡æ‹Ÿå‡½æ•°ä¸­è·å–æ•è·çš„å‚æ•°ï¼š
```javascript
(req) => {
  const { id, version } = req.params;
  const { include } = req.query;
  return { id: parseInt(id), version, includeAuthor: include === 'true' };
}
```

### æ™ºèƒ½ Mock æ•°æ®ç”Ÿæˆ

PocketMock å†…ç½®å¼ºå¤§çš„æ™ºèƒ½ç”Ÿæˆå™¨ï¼Œä½¿ç”¨ç®€å•è¯­æ³•å³å¯ç”Ÿæˆé€¼çœŸçš„æµ‹è¯•æ•°æ®ã€‚

#### å¿«é€Ÿä½“éªŒ

```javascript
{
  "user": {
    "id": "@guid",                    // â†’ "550e8400-e29b-41d4"
    "name": "@name",                  // â†’ "å¼ ä¸‰"
    "email": "@email",                // â†’ "zhangsan@example.com"
    "avatar": "@image(100x100)",      // â†’ "https://via.placeholder.com/100x100"
    "age": "@integer(18,60)",        // â†’ 25
    "role": "@pick(ç®¡ç†å‘˜,ç”¨æˆ·)"        // â†’ "ç®¡ç†å‘˜"
  }
}
```

#### å¸¸ç”¨ç”Ÿæˆå™¨

| è¯­æ³• | åŠŸèƒ½ | ç¤ºä¾‹ |
|------|------|------|
| `@guid` | å”¯ä¸€æ ‡è¯† | `"f47ac..."` |
| `@name` | éšæœºå§“å | `"å¼ ä¸‰"` |
| `@email` | é‚®ç®±åœ°å€ | `"user@example.com"` |
| `@integer(min,max)` | éšæœºæ•´æ•° | `@integer(1,100)` â†’ `42` |
| `@pick(A,B,C)` | éšæœºé€‰æ‹© | `@pick(è‹¹æœ,é¦™è•‰)` â†’ `"è‹¹æœ"` |
| `@image(100x100)` | å ä½å›¾ç‰‡ | `"https://via.placeholder.com/100x100"` |

#### æ›´å¤šåŠŸèƒ½

<details>
<summary>æŸ¥çœ‹å®Œæ•´ç”Ÿæˆå™¨åˆ—è¡¨</summary>

| åˆ†ç±» | è¯­æ³• | è¯´æ˜ |
|------|------|------|
| **åŸºç¡€ç±»å‹** |
| `@float(min,max,decimals)` | éšæœºæµ®ç‚¹æ•° | `@float(0,1,2)` â†’ `0.57` |
| `@boolean` | éšæœºå¸ƒå°”å€¼ | `true` |
| `@string(length)` | éšæœºå­—ç¬¦ä¸² | `@string(8)` â†’ `"aX9bK2pQ"` |
| **ä¸ªäººä¿¡æ¯** |
| `@phone(countryCode)` | ç”µè¯å·ç  | `@phone(+86)` |
| **æ—¥æœŸæ—¶é—´** |
| `@date(start,end)` | éšæœºæ—¥æœŸ | `@date(2023-01-01,2024-12-31)` |
| **å…¶ä»–** |
| `@color` | éšæœºé¢œè‰² | `"#a3f4c2"` |
| `@text(wordCount)` | éšæœºæ–‡æœ¬ | ç”ŸæˆæŒ‡å®šè¯æ•°çš„æ–‡æœ¬ |
| `@address(countries)` | åœ°å€å¯¹è±¡ | `@address(ä¸­å›½,ç¾å›½)` |
| `@company(industries)` | å…¬å¸å¯¹è±¡ | `@company(ç§‘æŠ€,é‡‘è)` |
| `@url(tlds)` | éšæœº URL | `@url(com,cn)` |

**æ•°ç»„è¯­æ³•ï¼š**
```javascript
{
  "users|5": {            // ç”Ÿæˆ5ä¸ªç”¨æˆ·
    "id": "@guid",
    "name": "@name"
  },
  "scores|3-5": "@integer(60,100)"  // ç”Ÿæˆ3åˆ°5ä¸ªåˆ†æ•°
}
```
</details>

### åŠ¨æ€å“åº”ï¼ˆå‡½æ•° Mockï¼‰

ä¸å†å±€é™äºé™æ€ JSONï¼ä½ å¯ä»¥ç¼–å†™ JavaScript å‡½æ•°æ¥æ ¹æ®è¯·æ±‚åŠ¨æ€ç”Ÿæˆå“åº”ã€‚

```javascript
(req) => {
  // æ ¹æ® Query å‚æ•°åŠ¨æ€è¿”å›
  if (req.query.id === '1') {
    return { id: 1, name: 'ç®¡ç†å‘˜', role: 'admin' };
  }

  // æ ¹æ® Body å†…å®¹åˆ¤æ–­
  if (req.body?.type === 'error') {
    return {
      status: 400,
      body: { message: 'å‚æ•°é”™è¯¯' }
    };
  }

  // é»˜è®¤è¿”å›
  return { id: 2, name: 'è®¿å®¢' };
}
```

### é…ç½®å¯¼å…¥

æ”¯æŒç›´æ¥å¯¼å…¥ API æ–‡æ¡£ï¼Œè‡ªåŠ¨è½¬æ¢å¹¶ç”Ÿæˆæ™ºèƒ½ Mock æ•°æ®ã€‚

- **æ”¯æŒæ ¼å¼**: Postman Collection v2.1.0, OpenAPI 3.0 (Swagger)
- **æ™ºèƒ½è½¬æ¢**:
  - `user_id` -> `@guid`
  - `avatar` -> `@image`
  - `{{baseUrl}}/users` -> `/users`

**ä½¿ç”¨æ–¹æ³•**: ç‚¹å‡»æ§åˆ¶å°é¡¶éƒ¨çš„"å¯¼å…¥"æŒ‰é’®ï¼Œé€‰æ‹© JSON æ–‡ä»¶å³å¯ã€‚

### åŠŸèƒ½å…¨é¢çš„ç½‘ç»œé¢æ¿

å†…ç½®çš„ç½‘ç»œé¢æ¿å°†å®æ—¶è®°å½•æ‰€æœ‰ç½‘ç»œè¯·æ±‚ï¼ˆåŒ…æ‹¬ Mocked å’ŒçœŸå®è¯·æ±‚ï¼‰ï¼Œæä¾›å¼ºå¤§çš„è°ƒè¯•åŠŸèƒ½ï¼š

- **æŸ¥çœ‹è¯¦æƒ…**: ç‚¹å‡»æ—¥å¿—æŸ¥çœ‹å®Œæ•´çš„ Request/Response Bodyã€‚
- **ä¸€é”® Mock**: ç‚¹å‡»æ—¥å¿—ä¸Šçš„"Mock"æŒ‰é’®ï¼Œå°†çœŸå®è¯·æ±‚ç›´æ¥è½¬æ¢ä¸º Mock è§„åˆ™ã€‚
- **ç­›é€‰**: æ”¯æŒæŒ‰ URLã€æ–¹æ³•ã€Mock çŠ¶æ€ç­›é€‰ã€‚

---

## æŠ€æœ¯åŸç†

- **çŒ´å­è¡¥ä¸**: é€šè¿‡é‡å†™ `window.fetch` å’Œæ‰©å±• `XMLHttpRequest` åŸå‹é“¾æ¥æ‹¦æˆªè¯·æ±‚
- **Shadow DOM**: ä½¿ç”¨ Shadow Root å°è£…è°ƒè¯• UIï¼Œå®ç°æ ·å¼å®Œå…¨æ²™ç®±åŒ–
- **Vite åº“æ¨¡å¼**: ä½¿ç”¨ Vite çš„åº“æ¨¡å¼å’Œ `css: 'injected'` ç­–ç•¥ï¼Œå°† CSS å†…è”åˆ° JS ä¸­ï¼Œå®ç°**å•æ–‡ä»¶å¯¼å…¥**ä½“éªŒ

---

## é¡¹ç›®è·¯çº¿å›¾

æŸ¥çœ‹æˆ‘ä»¬çš„ [é¡¹ç›®è·¯çº¿å›¾](ROADMAP.zh-CN.md)ï¼Œäº†è§£ PocketMocker çš„æœªæ¥è§„åˆ’ä»¥åŠå¦‚ä½•å‚ä¸è´¡çŒ®ï¼

---

## è´¡çŒ®ä¸è”ç³»

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å¯¹ PocketMocker çš„è´¡çŒ®ï¼æ— è®ºæ˜¯æŠ¥å‘Š Bugã€æå‡ºæ–°åŠŸèƒ½å»ºè®®ã€æ”¹è¿›æ–‡æ¡£è¿˜æ˜¯æäº¤ä»£ç ï¼Œæ‚¨çš„å¸®åŠ©éƒ½å°†ä½¿ PocketMocker å˜å¾—æ›´å¥½ã€‚

è¯·é˜…è¯»æˆ‘ä»¬çš„ [è´¡çŒ®æŒ‡å—](CONTRIBUTING.zh-CN.md) äº†è§£å¦‚ä½•å‚ä¸é¡¹ç›®ã€‚

### è”ç³»æˆ‘

å¦‚æœæ‚¨æœ‰ä»»ä½•ç–‘é—®ã€å»ºè®®æˆ–æƒ³åŠ å…¥äº¤æµï¼Œæ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- **Twitter (X)**: [https://x.com/tiancha79267301](https://x.com/tiancha79267301)
- **å¾®ä¿¡**
<div align="center">
  <img src="https://res.oafimg.cn/-/f69b6474980d7347/wechat.jpg" alt="æˆ‘çš„å¾®ä¿¡" width="150px">
</div>

---

## License

MIT Â© [tianchangNorth](https://github.com/tianchangNorth)

---

<div align="center">

**æŒæ§ HTTPï¼Œä¸»å®°ä½ çš„å‰ç«¯ï¼**

</div>